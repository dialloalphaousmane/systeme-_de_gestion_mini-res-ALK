{% extends 'base.html' %}
{% load static %}

{% block title %}{{ title|default:"Tableau de Bord" }} - SGM{% endblock %}

{% block content %}
<div class="min-h-screen bg-gray-100">
<div class="flex min-h-screen">
    <!-- Sidebar -->
    <aside class="hidden lg:flex lg:flex-col lg:w-72 lg:shrink-0">
        <div class="flex grow flex-col gap-y-5 overflow-y-auto bg-white border-r border-gray-200 px-6 py-6">
            <div class="flex items-center justify-between">
                <div class="text-lg font-extrabold text-gray-900">SGM</div>
                <div class="text-xs font-semibold text-gray-500">Dashboard</div>
            </div>
            <nav class="flex flex-1 flex-col">
                <ul role="list" class="flex flex-1 flex-col gap-y-7">
                    <li>
                        <ul role="list" class="-mx-2 space-y-1">
                            <li>
                                <a href="{% url 'dashboard_redirect' %}" class="group flex gap-x-3 rounded-md p-2 text-sm font-semibold leading-6 text-gray-700 hover:bg-gray-50 hover:text-blue-700">
                                    <i class="fas fa-th-large text-gray-400 group-hover:text-blue-600"></i>
                                    Tableau de bord
                                </a>
                            </li>
                            {% if request.user.is_authenticated and request.user.role == 'admin' %}
                            <li>
                                <a href="{% url 'admin:accounts_customuser_changelist' %}" class="group flex gap-x-3 rounded-md p-2 text-sm font-semibold leading-6 text-gray-700 hover:bg-gray-50 hover:text-blue-700">
                                    <i class="fas fa-users text-gray-400 group-hover:text-blue-600"></i>
                                    Utilisateurs
                                </a>
                            </li>
                            {% endif %}
                            <li>
                                <a href="{% url 'home' %}" class="group flex gap-x-3 rounded-md p-2 text-sm font-semibold leading-6 text-gray-700 hover:bg-gray-50 hover:text-blue-700">
                                    <i class="fas fa-home text-gray-400 group-hover:text-blue-600"></i>
                                    Accueil
                                </a>
                            </li>
                        </ul>
                    </li>
                    <li class="mt-auto">
                        <div class="rounded-lg bg-gray-50 p-3">
                            <div class="text-xs font-semibold text-gray-600">Connecté en tant que</div>
                            <div class="mt-1 text-sm font-bold text-gray-900">{{ request.user.username }}</div>
                            <div class="mt-1 text-xs text-gray-500">{{ request.user.get_role_display }}</div>
                        </div>
                    </li>
                </ul>
            </nav>
        </div>
    </aside>

    <!-- Main content -->
    <main class="flex-1 flex flex-col overflow-hidden">
        <!-- Navbar -->
        <header class="bg-white border-b border-gray-200">
            <div class="max-w-7xl mx-auto py-4 px-4 sm:px-6 lg:px-8 flex justify-between items-center">
                <div>
                    <h1 class="text-2xl font-extrabold text-gray-900">{{ title|default:"Tableau de bord" }}</h1>
                    <p class="mt-1 text-sm text-gray-600">Aperçu et actions rapides</p>
                </div>
                {% include 'includes/user_menu.html' %}
            </div>
        </header>

        <!-- Page content -->
        <div class="flex-1 overflow-y-auto">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
            {% block dashboard_content %}
            <!-- Le contenu spécifique à chaque dashboard ira ici -->
            {% endblock %}
            </div>
        </div>
    </main>
</div>
</div>
{% endblock %}